# Movies

**Movies** — Android-приложение для просмотра фильмов. Пользователь может изучить список жанров, посмотреть подборки фильмов в каждой категории и открыть подробное описание выбранного фильма.

Баннер с рекламой присутсвует только в тетовой сборке.

## Screenshots

### Главный экран

<img width="3326" height="3190" alt="image" src="https://github.com/user-attachments/assets/1f913aba-8a1e-43c4-bbe1-13047ad6e45b" />

### Экран подробной информации

<img width="3326" height="3190" alt="image" src="https://github.com/user-attachments/assets/4ce3a399-39e1-4ea1-bc6f-4762e1de2ec2" />

### Главный экран (вход без сети)

<img width="3326" height="3190" alt="image" src="https://github.com/user-attachments/assets/8e80ee74-9459-4023-8d3b-1068833eb742" />

### Экран подробной информации (вход без сети)

<img width="3326" height="3190" alt="image" src="https://github.com/user-attachments/assets/0455bd46-83a0-4bf0-af5f-fe44b000302e" />

## Архитектура

Проект построен по принципам **Clean Architecture** и использует шаблон **MVVM**.

```
UI -> ViewModel -> UseCase -> Repository -> DataSource(API/DB)
```

### Основные технологии

- **DI**: [Hilt](https://dagger.dev/hilt/)
- **Хранение данных**: Room
- **Сеть**: Retrofit + OkHttp
- **Потоки**: Kotlin Coroutines + Flow
- **Загрузка страниц**: собственная реализация пагинации

### Слои приложения

- **Presentation** – `ViewModel` и состояния экрана (`UiState`).
- **Domain** – `UseCase` и интерфейсы репозиториев.
- **Data** – реализации репозиториев, DAO и сетевые сервисы.

## Тестирование

В проекте присутствуют примеры unit‑тестов и инструментальных тестов на Espresso. Для работы с вложенными `RecyclerView` применяются расширения, упрощающие поиск элементов и прокрутку. В тестах используется утилита `waitFor()` для ожидания завершения анимаций и асинхронных операций.

## Особенности

- **Offline** – данные кэшируются в Room. При отсутствии сети приложение отображает сохранённую информацию и повторяет запросы при восстановлении подключения.
- **Edge‑to‑Edge** – интерфейс адаптирован под экраны без рамок с учётом вырезов и системных жестов.
- **Обработка ошибок** – все состояния представления описываются через `sealed` классы (`UiState`), что упрощает отображение ошибок и загрузки.
- **Espresso** – тесты содержат примеры работы с вложенными списками (`NestedRecyclerView`).
- **SavedStateHandle** – `ViewModel` восстанавливает состояние при пересоздании фрагмента (например, после поворота экрана).
